{"version":3,"sources":["webpack:///./src/controllers/control.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0C;AACG;AACG;AACG;AACL;AACA;AACY;AAC1D,mBAAmB,wDAAU;AAC7B,kBAAkB,uDAAQ;;AAE1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mCAAmC,yDAAU;AAC7C;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA,qBAAqB,mEAAY;AACjC;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4DAAY;AAClD;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6DAAQ;AACnC;AACA;AACA;AACA;AACA;AACA","file":"js/app.67b5bc344b9c3bbc8153.hot-update.js","sourcesContent":["import indexTPL from '../views/index.art';\r\nimport sigininTPL from '../views/signin.art';\r\nimport usersTPL from '../views/user-signup.art';\r\nimport usersListTPL from '../views/users-list.art';\r\nimport warningTPL from '../views/warning.art';\r\nimport successTPL from '../views/success.art';\r\nimport usersPageTPL from '../views/users-paginations.art';\r\nconst htmlSignin = sigininTPL();\r\nconst htmlIndex = indexTPL();\r\n\r\n//--------公共参数------\r\nconst pageSize = 10;\r\n\r\n//---------功能函数板块----------\r\nconst _handleSubmit = (router) => {\r\n    return (e) => {\r\n        e.preventDefault();\r\n        router.go('/index');\r\n    }\r\n}\r\nconst _signup = () => {\r\n    const $btn_close = $('#users-close');\r\n    //提交表单\r\n    const data = $('#users-form').serialize().toString();\r\n    $.ajax({\r\n        url: '/api/users/signup',\r\n        type: 'post',\r\n        data,\r\n        success: function (res) {\r\n            if (res.Code == 200) {\r\n                _list();\r\n            }\r\n        },\r\n        error: function (err) {\r\n            $('#warning-tip').html(warningTPL({\r\n                msg: \"用户注册失败！\"\r\n            }))\r\n            console.log(err);\r\n        }\r\n    })\r\n    //调用btn_close按钮上的click事件\r\n    $btn_close.click();\r\n}\r\n\r\nconst _pagination = (data) => {\r\n    const total = data.length;\r\n    var pageCount = Math.ceil(total / pageSize);\r\n    console.log(pageCount);\r\n    var pageArray = new Array(pageCount);\r\n    for (let i = 0; i < pageCount; i++) {\r\n        pageArray[i] = i + 1;\r\n    }\r\n    const htmlPage = usersPageTPL({\r\n        pageArray\r\n    });\r\n    $('#users-page').html(htmlPage);\r\n\r\n    // 绑定事件\r\n    $('#users-page-list li:not(:first-child,:last-child)').on('click', function () {\r\n        $(this).addClass('active').siblings().removeClass('active');\r\n        let pageNo = $(this).index();\r\n    })\r\n    //第一个默认active\r\n    if (total >= 1) {\r\n        $('#users-page-list li:nth-child(2)').addClass('active');\r\n    }\r\n}\r\n\r\nconst _list = (pageNo) => {\r\n    $.ajax({\r\n        url: '/api/users/list',\r\n        type: 'get',\r\n        success: (res) => {\r\n            let data = res.data;\r\n            _pagination(data);\r\n            if (res.Code == 200) {\r\n                $('#users-list').html(usersListTPL({\r\n                    data: data.slice((pageNo - 1) * pageSize, pageNo * pageSize)\r\n                }));\r\n            }\r\n        },\r\n        error: (err) => {\r\n            console.log(err);\r\n        }\r\n    })\r\n}\r\n\r\n\r\n// -------router板块------\r\n//登录页\r\nconst signin = (router) => {\r\n    return (req, res, next) => {\r\n        res.render(htmlSignin);\r\n        $('#signin').on('submit', _handleSubmit(router));\r\n    }\r\n}\r\n//注册页\r\nconst signup = () => {\r\n\r\n}\r\n//index页\r\nconst index = (router) => {\r\n    return (req, res, next) => {\r\n        res.render(htmlIndex);\r\n        //window resize,让页面撑满整个页面\r\n        $(window, '.wrapper').resize();\r\n        //填充用户列表\r\n        $('#content').html(usersTPL());\r\n        // 渲染list\r\n        _list(1);\r\n        //点击保存提交表单\r\n        $('#users-save').on('click', _signup);\r\n    }\r\n}\r\n\r\nexport {\r\n    signin,\r\n    index\r\n}"],"sourceRoot":""}